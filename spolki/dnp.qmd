---
title: "DINO POLSKA S.A. (DNP)"
format: 
  dashboard:
    orientation: rows
    nav-buttons: [github]
---

```{r setup, include=FALSE}
library(tidyverse)
library(plotly)
library(xts)
library(TTR)

get_stock_data <- function(ticker) {
  prices_all <- readRDS("../data/prices100.RDS")
  col_idx <- which(names(prices_all) == ticker)
  if(length(col_idx) == 0) return(NULL)
  df <- prices_all[, c(1, col_idx)]
  names(df) <- c("date", "price")
  df <- df %>% filter(!is.na(price))
  return(df)
}

stock_data <- get_stock_data("DNP")
last_row <- tail(stock_data, 1)
last_price <- last_row$price
last_date <- last_row$date
prev_price <- tail(stock_data$price, 2)[1]
change_pct <- round((last_price - prev_price) / prev_price * 100, 2)
y_ago_idx <- nrow(stock_data) - 252
change_yy <- if(y_ago_idx > 0) round((last_price - stock_data$price[y_ago_idx]) / stock_data$price[y_ago_idx] * 100, 2) else "N/A"
```

## Row {height=10%}

::: {.card}
**Ticker:** DNP | **DINO POLSKA S.A.** | **Siedziba:** Krotoszyn | **WWW:** [grupadino.pl](https://www.grupadino.pl) | **Branża:** [Handel i konsumpcja](../spolki-gpw.qmd?branza=Handel+i+konsumpcja) | **Podbranża:** [handel detaliczny spożywczy](../spolki-gpw.qmd?podbranza=handel+detaliczny+spożywczy)
:::

## Row {height=15%}

```{r}
#| content: valuebox
#| title: "Ostatnia cena"
list(icon = "currency-exchange", color = "primary", value = paste0(round(last_price, 2), " PLN"))
```

```{r}
#| content: valuebox
#| title: "Zmiana d/d"
list(icon = "graph-up", color = if(change_pct >= 0) "success" else "danger", value = paste0(change_pct, "%"))
```

```{r}
#| content: valuebox
#| title: "Zmiana y/y"
list(icon = "calendar-check", color = if(is.numeric(change_yy) && change_yy >= 0) "success" else if(is.numeric(change_yy)) "danger" else "secondary", value = if(is.numeric(change_yy)) paste0(change_yy, "%") else change_yy)
```

## Row {height=75%}

### Kolumna {width=70% .tabset}

::: {.card title="Notowania"}
```{r}
stock_xts <- xts(stock_data$price, order.by = as.Date(stock_data$date))
sma200 <- SMA(stock_xts, n = 200)
plot_ly(x = index(stock_xts), y = as.numeric(stock_xts), type = 'scatter', mode = 'lines', name = 'Cena DNP') %>%
  add_lines(x = index(stock_xts), y = as.numeric(sma200), name = 'SMA 200', line = list(color = 'orange')) %>%
  layout(xaxis = list(title = ""), yaxis = list(title = "Cena (PLN)"), legend = list(orientation = 'h', x = 0.1, y = 1.1), margin = list(t = 50))
```
:::

::: {.card title="Profil i Biznes"}
**Dino Polska S.A.** to jedna z najdynamiczniej rosnących sieci supermarketów w Polsce. Unikalny model biznesowy opiera się na własności gruntów, ustandaryzowanych placówkach o powierzchni ok. 400 m2 oraz bardzo sprawnej logistyce. Dino skupia się głównie na mniejszych miastach i terenach wiejskich.
:::

::: {.card title="Wizja i Strategia"}
Głównym celem Dino jest dalsza intensywna ekspansja terytorialna w Polsce. Spółka dąży do bycia najwygodniejszą siecią zakupową dla mieszkańców mniejszych miejscowości, stawiając na świeżość produktów i efektywność operacyjną.

::: {.callout-important}
## Informacja prawna
Materiały publikowane na tej stronie mają charakter wyłącznie informacyjny i edukacyjny. Nie stanowią porady inwestycyjnej.
:::
:::

### O spółce {width=30%}

::: {.card title="Zasoby i Przewagi"}
*   **Własna logistyka:** Pełna kontrola nad łańcuchem dostaw.
*   **Produkcja własna:** Zakład mięsny Agro-Rydzyna dostarczający świeże wyroby.
*   **Własność budynków:** Brak kosztów wynajmu zwiększa stabilność finansową.
*   **Aktualizacja danych:** `r last_date`
:::
