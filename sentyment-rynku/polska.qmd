---
# === Wyświetlane na stronie ===
title: "Sentyment rynku - Polska"
subtitle: "Analiza nastrojów na polskim rynku kapitałowym"
date: today

# === SEO - Meta tagi w <head> ===
pagetitle: "Sentyment rynku GPW - Polska | Analiza nastrojów inwestorów"
format:
  html:
    header-includes: |
      <meta name="description" content="Aktualny sentyment rynku na GPW. Analiza nastrojów inwestorów, wskaźniki optymizmu i pesymizmu na polskim rynku kapitałowym.">
      <meta name="keywords" content="sentyment rynku, GPW, nastroje inwestorów, pesymizm, optymizm, polska giełda">
---

## O wskaźniku

**Sentyment rynku** to wskaźnik nastrojów inwestorów na Giełdzie Papierów Wartościowych w Warszawie. Mierzy on emocjonalny stosunek uczestników rynku do sytuacji na giełdzie, pokazując czy przeważają postawy optymistyczne czy pesymistyczne. Wskaźnik ten może sygnalizować potencjalne punkty zwrotne na rynku, gdy nastroje osiągają ekstremalne poziomy.

Sentyment rynku często wyprzedza ruchy cenowe indeksów giełdowych. Skrajny pesymizm może wskazywać na wyprzedanie rynku i potencjalne dno, podczas gdy ekstremalne nastroje euforyczne mogą poprzedzać korekty spadkowe. Warto jednak pamiętać, że sentyment to tylko jedno z narzędzi analitycznych i powinien być stosowany w połączeniu z innymi metodami analizy rynku.

```{r}
#| echo: false
#| warning: false
#| message: false

library(tidyverse)
library(xts)
library(plotly)
library(knitr)
library(kableExtra)

# Wczytaj dane
all_data <- readRDS("../data/sentiment.RDS")

# Ogranicz do ostatnich 250 sesji
all_data <- all_data[(nrow(all_data)-250):nrow(all_data),]

# Konwertuj do data frame
df <- data.frame(
  data = index(all_data),
  sentyment = as.numeric(all_data$sent_norm),
  wig20 = as.numeric(all_data$WIG20),
  wig = as.numeric(all_data$WIG)
)
```

## Wykres sentymentu rynku

Poniższy wykres przedstawia znormalizowany wskaźnik sentymentu rynku (0-100) na tle znormalizowanych indeksów WIG20 i WIG z ostatnich 250 sesji giełdowych. Możesz go przybliżać i sprawdzać wartości dla konkretnych dat.

```{r}
#| echo: false
#| warning: false
#| message: false

# Normalizacja indeksów do skali 0-100 dla lepszej wizualizacji
df_norm <- df %>%
  mutate(
    wig20_norm = (wig20 - min(wig20, na.rm = TRUE)) / 
                 (max(wig20, na.rm = TRUE) - min(wig20, na.rm = TRUE)) * 100,
    wig_norm = (wig - min(wig, na.rm = TRUE)) / 
               (max(wig, na.rm = TRUE) - min(wig, na.rm = TRUE)) * 100
  )

# Wykres interaktywny
fig <- plot_ly() %>%
  add_trace(
    data = df_norm,
    x = ~data, 
    y = ~sentyment,
    name = "Sentyment rynku",
    type = "scatter",
    mode = "lines",
    line = list(color = "#3b82f6", width = 2),
    hovertemplate = paste(
      "<b>Data:</b> %{x|%Y-%m-%d}<br>",
      "<b>Sentyment:</b> %{y:.1f}<br>",
      "<extra></extra>"
    )
  ) %>%
  add_trace(
    data = df_norm,
    x = ~data, 
    y = ~wig20_norm,
    name = "WIG20 (norm.)",
    type = "scatter",
    mode = "lines",
    line = list(color = "#f59e0b", width = 1.5),
    yaxis = "y2",
    hovertemplate = paste(
      "<b>Data:</b> %{x|%Y-%m-%d}<br>",
      "<b>WIG20:</b> %{y:.1f}<br>",
      "<extra></extra>"
    )
  ) %>%
  add_trace(
    data = df_norm,
    x = ~data, 
    y = ~wig_norm,
    name = "WIG (norm.)",
    type = "scatter",
    mode = "lines",
    line = list(color = "#10b981", width = 1.5),
    yaxis = "y2",
    hovertemplate = paste(
      "<b>Data:</b> %{x|%Y-%m-%d}<br>",
      "<b>WIG:</b> %{y:.1f}<br>",
      "<extra></extra>"
    )
  ) %>%
  layout(
    title = list(
      text = "Sentyment rynku GPW vs WIG20 i WIG (ostatnie 250 sesji)",
      font = list(size = 16)
    ),
    xaxis = list(title = "Data"),
    yaxis = list(
      title = "Sentyment rynku (0-100)",
      side = "left",
      range = c(0, 100)
    ),
    yaxis2 = list(
      title = "WIG20 / WIG (znormalizowane 0-100)",
      overlaying = "y",
      side = "right",
      range = c(0, 100)
    ),
    hovermode = "x unified",
    legend = list(
      orientation = "h",
      x = 0.5,
      xanchor = "center",
      y = -0.15
    ),
    margin = list(b = 100)
  )

fig
```

::: callout-note
## Jak czytać wykres?

-   **Sentyment rynku (niebieski):** znormalizowany wskaźnik nastrojów (0-100)
-   **WIG20 i WIG (pomarańczowy/zielony):** znormalizowane do skali 0-100 dla porównywalności
-   Wartości \> 70 sugerują bardzo optymistyczne nastroje (potencjalne wykupienie)
-   Wartości \< 30 sugerują pesymistyczne nastroje (potencjalne wyprzedanie)
-   Wartości 40-60 wskazują na neutralny sentyment rynku
:::

## Ostatnie 60 sesji

Tabela przedstawia szczegółowe wartości sentymentu rynku oraz głównych indeksów GPW z ostatnich 60 sesji giełdowych (kwartał).

```{r}
#| echo: false
#| warning: false
#| message: false

# Przygotuj tabelę - ostatnie 60 dni
df_table <- df %>%
  tail(60) %>%
  arrange(desc(data)) %>%
  mutate(
    data = format(data, "%Y-%m-%d"),
    sentyment = sprintf("%.1f", sentyment),
    wig20 = sprintf("%.2f", wig20),
    wig = sprintf("%.2f", wig)
  ) %>%
  select(data, sentyment, wig20, wig)

# Wyświetl tabelę
kable(
  df_table,
  col.names = c("Data", "Sentyment", "WIG20", "WIG"),
  align = c("l", "r", "r", "r"),
  caption = "Wartości sentymentu rynku i głównych indeksów GPW (ostatnie 60 sesji)"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover", "condensed"),
    full_width = FALSE,
    position = "left",
    font_size = 12
  ) %>%
  scroll_box(height = "500px")
```

## Metodologia

### Źródło danych

Wskaźnik sentymentu rynku jest budowany na podstawie codziennej analizy nagłówków publikowanych na stronach głównych największych polskich serwisów zajmujących się tematyką giełdy, rynków finansowych i ekonomii. Dane są zbierane od września 2023 roku.

### Proces zbierania i obliczania wskaźnika

Proces przebiega w następujących krokach:

1.  **Zbieranie danych:** Codziennie przed rozpoczęciem sesji GPW analizowane są strony główne serwisów informacyjnych z dziedziny giełdy i finansów.

2.  **Klasyfikacja nagłówków:** Wszystkie zidentyfikowane nagłówki newsów otrzymują klasyfikację sentymentu:

    -   **+1** - sentyment pozytywny (nagłówki optymistyczne, wskazujące na dobre wiadomości dla rynku)
    -   **0** - sentyment neutralny (nagłówki informacyjne bez wyraźnego wydźwięku emocjonalnego)
    -   **-1** - sentyment negatywny (nagłówki pesymistyczne, wskazujące na niepokojące informacje)

3.  **Agregacja dzienna:** Dla każdego serwisu obliczana jest suma sentymentu z danego dnia, następnie sumowane są wartości ze wszystkich analizowanych serwisów, tworząc dzienny wskaźnik sentymentu dla całego rynku.

4.  **Normalizacja:** Dzienny sentyment jest normalizowany do skali 0-100, gdzie:

    -   **0** oznacza najbardziej pesymistyczne nastroje w historii pomiaru
    -   **100** oznacza najbardziej optymistyczne nastroje w historii pomiaru
    -   **50** reprezentuje neutralny punkt w historycznym rozkładzie nastrojów

Wskaźnik jest aktualizowany codziennie przed rozpoczęciem sesji GPW.

## Potencjalne zastosowania

### 1. Identyfikacja ekstremów rynkowych

Wskaźnik sentymentu może sygnalizować ekstrema rynkowe, które często poprzedzają punkty zwrotne:

-   **Skrajny pesymizm (sentyment \< 20-30):** Może wskazywać na wyprzedanie rynku i potencjalne dno. Gdy większość nagłówków jest negatywna, często oznacza to, że negatywne informacje są już w cenach.

-   **Skrajna euforia (sentyment \> 70-80):** Może sygnalizować wykupienie rynku i zwiększone ryzyko korekty. Gdy dominują wyłącznie pozytywne nagłówki, może brakować nowych katalizatorów do dalszego napędzania wzrostów.

### 2. Dywergencje z indeksami

**Dywergencje** między sentymentem a zachowaniem głównych indeksów mogą być szczególnie informacyjne:

-   **Pozytywna dywergencja:** Sentyment poprawia się, podczas gdy WIG/WIG20 nadal spadają – może zapowiadać zbliżające się odbicie.

-   **Negatywna dywergencja:** Sentyment pogarsza się, mimo że indeksy rosną – ostrzeżenie przed możliwą korektą spadkową.

### 3. Potwierdzenie trendów

Silne trendy są bardziej wiarygodne, gdy sentyment je wspiera:

-   **Trend wzrostowy + rosnący sentyment:** Potwierdza siłę hossy
-   **Trend spadkowy + spadający sentyment:** Potwierdza siłę bessy

### 4. Wsparcie w analizie rynku

Sentyment może stanowić dodatkowe narzędzie w analizie sytuacji rynkowej:

-   **Niski sentyment (\< 30) z oznakami poprawy:** Można rozważyć zwiększenie ekspozycji na rynek
-   **Wysoki sentyment (\> 70) z oznakami pogorszenia:** Można rozważyć redukcję pozycji lub zabezpieczenie portfela
-   **Sentyment w okolicy 40-60:** Rynek może być w fazie konsolidacji

::: callout-warning
## Ważne zastrzeżenie

Wskaźnik sentymentu rynku jest narzędziem analitycznym służącym do lepszego zrozumienia nastrojów na rynku. Nie stanowi on rekomendacji inwestycyjnej ani porady, jak należy postępować z kapitałem. Sentyment może pozostawać na ekstremalnych poziomach przez dłuższy czas, zanim nastąpi odwrócenie trendu. Powinien być używany w połączeniu z innymi metodami analizy technicznej i fundamentalnej, zawsze z uwzględnieniem indywidualnej tolerancji ryzyka oraz celów inwestycyjnych.
:::

------------------------------------------------------------------------

::: callout-tip
## Aktualizacje

Wskaźnik sentymentu rynku jest aktualizowany codziennie przed rozpoczęciem sesji GPW.

Ostatnia aktualizacja: `{r} format(Sys.Date(), "%Y-%m-%d")`
:::

------------------------------------------------------------------------

::: callout-important
## Informacja prawna

Materiały publikowane na tej stronie mają charakter wyłącznie informacyjny i edukacyjny. Nie stanowią one porady inwestycyjnej, rekomendacji, ani oferty kupna lub sprzedaży jakichkolwiek instrumentów finansowych. Decyzje inwestycyjne powinny być podejmowane na podstawie własnej analizy i po konsultacji z licencjonowanym doradcą finansowym.
:::
